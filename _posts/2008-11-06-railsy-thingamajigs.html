---
layout: post
title: Railsy Thingamajigs
published: true
---
<p><br />I have been writing some rails apps recently.  Here are some of the things I have encountered.<p />Phusion passenger: <a href="http://www.modrails.com/">http://www.modrails.com/</a><p />It runs your app as the user who owns environment.rb.  If environment.rb is owned by root, then it defaults to the PassengerDefaultUser in the httpd.conf file.  This is <span style="font-style: italic;">nobody</span> by default.  If you have any system("","") commands, make sure to set your user appropriately.  <p />Ruby system startup script:<br />Here is one from my brother-in-law, the famous <a href="http://timmorgan.org">Tim Morgan</a> <a href="http://snippets.dzone.com/posts/show/2594">http://snippets.dzone.com/posts/show/2594</a><p />Here is one I made for my use with delayed_job, <a href="http://github.com/jrichter/delayed_job/tree/master/lib/delayed/worker_startup_script">http://github.com/jrichter/delayed_job/tree/master/lib/delayed/worker_startup_script</a><p />In a ruby startup script the shebang line should be <span style="font-style: italic;">#!/usr/bin/env ruby</span> <p />To load a rails environment and get rake support make sure to include:<br /><code><br />app_dir = '/path/to/rails/app'<br />require(File.join(app_dir, 'config', 'boot'))<br /></code><br />Then if you need to run a rake task, such as db:migrate:<br /><code><br />system "/usr/bin/ruby /usr/bin/rake -f #{app_dir}/Rakefile db:migrate &"<br /></code><br /></p><div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/7696555460565635585-2133312693265564145?l=www.jet5ive.com" height="1" alt="" width="1" /></div>
